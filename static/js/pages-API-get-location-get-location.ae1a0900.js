(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-API-get-location-get-location"],{3639:function(t,e,n){n("bf0f"),n("18f7"),n("d0af"),n("de6c"),n("6a54"),n("9a2c");var i=n("bdbb")["default"];function r(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(r=function(t){return t?n:e})(t)}t.exports=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!==typeof t)return{default:t};var n=r(e);if(n&&n.has(t))return n.get(t);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=u?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=t[a]}return o["default"]=t,n&&n.set(t,o),o},t.exports.__esModule=!0,t.exports["default"]=t.exports},4114:function(t,e,n){var i=n("c86c");e=i(!1),e.push([t.i,".popup-view[data-v-8f6a6a52]{width:%?500?%}.popup-title[data-v-8f6a6a52]{display:block;font-size:16px;line-height:3;margin-bottom:10px;text-align:center}.popup-buttons uni-button[data-v-8f6a6a52]{margin-left:4px;margin-right:4px}",""]),t.exports=e},"46a6":function(t,e,n){"use strict";n.r(e);var i=n("c5fc"),r=n("6901");for(var o in r)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n("6fd6");var u=n("828b"),a=Object(u["a"])(r["default"],i["b"],i["c"],!1,null,"8f6a6a52",null,!1,i["a"],void 0);e["default"]=a.exports},6901:function(t,e,n){"use strict";n.r(e);var i=n("fd94"),r=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=r.a},"6fd6":function(t,e,n){"use strict";var i=n("f194"),r=n.n(i);r.a},"934f":function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.dateUtils=void 0,e.formatLocation=function(t,e){"string"===typeof t&&"string"===typeof e&&(t=parseFloat(t),e=parseFloat(e));return t=t.toFixed(2),e=e.toFixed(2),{longitude:t.toString().split("."),latitude:e.toString().split(".")}},e.formatTime=function(t){if("number"!==typeof t||t<0)return t;var e=parseInt(t/3600);t%=3600;var n=parseInt(t/60);t%=60;var i=t;return[e,n,i].map((function(t){return t=t.toString(),t[1]?t:"0"+t})).join(":")},n("e966"),n("fd3c"),n("c9b5"),n("bf0f"),n("ab80"),n("e838"),n("5c47"),n("dfcf");var i={UNITS:{"年":315576e5,"月":26298e5,"天":864e5,"小时":36e5,"分钟":6e4,"秒":1e3},humanize:function(t){var e="";for(var n in this.UNITS)if(t>=this.UNITS[n]){e=Math.floor(t/this.UNITS[n])+n+"前";break}return e||"刚刚"},format:function(t){var e=this.parse(t),n=Date.now()-e.getTime();if(n<this.UNITS["天"])return this.humanize(n);var i=function(t){return t<10?"0"+t:t};return e.getFullYear()+"/"+i(e.getMonth()+1)+"/"+i(e.getDate())+"-"+i(e.getHours())+":"+i(e.getMinutes())},parse:function(t){var e=t.split(/[^0-9]/);return new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5])}};e.dateUtils=i},b3e2:function(t,e,n){"use strict";var i,r=n("c238"),o=n("85c1"),u=n("bb80"),a=n("a74c"),s=n("d0b1"),c=n("7658"),f=n("d871c"),l=n("1c06"),d=n("235c").enforce,p=n("af9e"),v=n("a20b"),h=Object,g=Array.isArray,b=h.isExtensible,w=h.isFrozen,m=h.isSealed,x=h.freeze,y=h.seal,_=!o.ActiveXObject&&"ActiveXObject"in o,S=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},O=c("WeakMap",S,f),k=O.prototype,z=u(k.set);if(v)if(_){i=f.getConstructor(S,"WeakMap",!0),s.enable();var M=u(k["delete"]),C=u(k.has),L=u(k.get);a(k,{delete:function(t){if(l(t)&&!b(t)){var e=d(this);return e.frozen||(e.frozen=new i),M(this,t)||e.frozen["delete"](t)}return M(this,t)},has:function(t){if(l(t)&&!b(t)){var e=d(this);return e.frozen||(e.frozen=new i),C(this,t)||e.frozen.has(t)}return C(this,t)},get:function(t){if(l(t)&&!b(t)){var e=d(this);return e.frozen||(e.frozen=new i),C(this,t)?L(this,t):e.frozen.get(t)}return L(this,t)},set:function(t,e){if(l(t)&&!b(t)){var n=d(this);n.frozen||(n.frozen=new i),C(this,t)?z(this,t,e):n.frozen.set(t,e)}else z(this,t,e);return this}})}else(function(){return r&&p((function(){var t=x([]);return z(new O,t,1),!w(t)}))})()&&a(k,{set:function(t,e){var n;return g(t)&&(w(t)?n=x:m(t)&&(n=y)),z(this,t,e),n&&n(t),this}})},c5fc:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={pageHead:n("855f").default,uniPopup:n("9e65").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("page-head",{attrs:{title:t.title}}),n("v-uni-view",{staticClass:"uni-padding-wrap"},[n("v-uni-view",{staticStyle:{background:"#FFFFFF",padding:"40rpx"}},[n("v-uni-view",{staticClass:"uni-hello-text uni-center"},[t._v("当前位置经纬度")]),!1===t.hasLocation?[n("v-uni-view",{staticClass:"uni-h2 uni-center uni-common-mt"},[t._v("未获取")])]:t._e(),!0===t.hasLocation?[n("v-uni-view",{staticClass:"uni-h2 uni-center uni-common-mt"},[n("v-uni-text",[t._v("E: "+t._s(t.location.longitude[0])+"°"+t._s(t.location.longitude[1])+"′")]),n("v-uni-text",[t._v("\\nN: "+t._s(t.location.latitude[0])+"°"+t._s(t.location.latitude[1])+"′")])],1)]:t._e()],2),n("v-uni-view",{staticClass:"uni-btn-v"},[n("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getLocation.apply(void 0,arguments)}}},[t._v("获取位置")]),n("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clear.apply(void 0,arguments)}}},[t._v("清空")])],1)],1),n("uni-popup",{attrs:{show:"showpopup"===t.type,mode:"fixed"},on:{hidePopup:function(e){arguments[0]=e=t.$handleEvent(e),t.togglePopup("")}}},[n("v-uni-view",{staticClass:"popup-view"},[n("v-uni-text",{staticClass:"popup-title"},[t._v("需要用户授权位置权限")]),n("v-uni-view",{staticClass:"uni-flex popup-buttons"},[n("v-uni-button",{staticClass:"uni-flex-item",attrs:{type:"primary","open-type":"openSetting"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openSetting.apply(void 0,arguments)}}},[t._v("设置")]),n("v-uni-button",{staticClass:"uni-flex-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.togglePopup("")}}},[t._v("取消")])],1)],1)],1)],1)},o=[]},d0af:function(t,e,n){"use strict";n("b3e2")},d871c:function(t,e,n){"use strict";var i=n("bb80"),r=n("a74c"),o=n("d0b1").getWeakData,u=n("b720"),a=n("e7e3"),s=n("1eb8"),c=n("1c06"),f=n("5075"),l=n("4d16"),d=n("338c"),p=n("235c"),v=p.set,h=p.getterFor,g=l.find,b=l.findIndex,w=i([].splice),m=0,x=function(t){return t.frozen||(t.frozen=new y)},y=function(){this.entries=[]},_=function(t,e){return g(t.entries,(function(t){return t[0]===e}))};y.prototype={get:function(t){var e=_(this,t);if(e)return e[1]},has:function(t){return!!_(this,t)},set:function(t,e){var n=_(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=b(this.entries,(function(e){return e[0]===t}));return~e&&w(this.entries,e,1),!!~e}},t.exports={getConstructor:function(t,e,n,i){var l=t((function(t,r){u(t,p),v(t,{type:e,id:m++,frozen:void 0}),s(r)||f(r,t[i],{that:t,AS_ENTRIES:n})})),p=l.prototype,g=h(e),b=function(t,e,n){var i=g(t),r=o(a(e),!0);return!0===r?x(i).set(e,n):r[i.id]=n,t};return r(p,{delete:function(t){var e=g(this);if(!c(t))return!1;var n=o(t);return!0===n?x(e)["delete"](t):n&&d(n,e.id)&&delete n[e.id]},has:function(t){var e=g(this);if(!c(t))return!1;var n=o(t);return!0===n?x(e).has(t):n&&d(n,e.id)}}),r(p,n?{get:function(t){var e=g(this);if(c(t)){var n=o(t);return!0===n?x(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return b(this,t,e)}}:{add:function(t){return b(this,t,!0)}}),l}}},f194:function(t,e,n){var i=n("4114");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("967d").default;r("22d84bc8",i,!0,{sourceMap:!1,shadowMode:!1})},fd94:function(t,e,n){"use strict";n("6a54");var i=n("3639").default,r=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("5ef2"),n("bf0f");var o=r(n("2634")),u=r(n("2fdc")),a=i(n("934f")),s=a.formatLocation,c={data:function(){return{title:"getLocation",hasLocation:!1,location:{},type:""}},methods:{togglePopup:function(t){this.type=t},showConfirm:function(){this.type="showpopup"},hideConfirm:function(){this.type=""},getLocation:function(){var t=this;return(0,u.default)((0,o.default)().mark((function e(){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.doGetLocation();case 1:case"end":return e.stop()}}),e)})))()},doGetLocation:function(){var t=this;uni.getLocation({success:function(e){t.hasLocation=!0,t.location=s(e.longitude,e.latitude)},fail:function(t){t.errMsg.indexOf("auth deny")>=0?uni.showToast({title:"访问位置被拒绝"}):uni.showToast({title:t.errMsg})}})},getSetting:function(){return new Promise((function(t,e){uni.getSetting({success:function(e){void 0!==e.authSetting["scope.userLocation"]?e.authSetting["scope.userLocation"]?t(1):t(2):t(0)}})}))},openSetting:function(){var t=this;this.hideConfirm(),uni.openSetting({success:function(e){e.authSetting&&e.authSetting["scope.userLocation"]&&t.doGetLocation()},fail:function(t){}})},checkPermission:function(){return(0,u.default)((0,o.default)().mark((function t(){var e;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!permision.isIOS){t.next=6;break}return t.next=3,permision.requestIOS("location");case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,permision.requestAndroid("android.permission.ACCESS_FINE_LOCATION");case 8:t.t0=t.sent;case 9:return e=t.t0,null===e||1===e?e=1:2===e?uni.showModal({content:"系统定位已关闭",confirmText:"确定",showCancel:!1,success:function(t){}}):e.code?uni.showModal({content:e.message}):uni.showModal({content:"需要定位权限",confirmText:"设置",success:function(t){t.confirm&&permision.gotoAppSetting()}}),t.abrupt("return",e);case 12:case"end":return t.stop()}}),t)})))()},clear:function(){this.hasLocation=!1}}};e.default=c}}]);